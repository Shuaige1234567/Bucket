{"version":3,"file":"src_Bucket_assets_src_pages_showFile_jsx.index.js","mappings":";;;;;;;;;;;;;;;;;AAA0B;AACgB;AACE;AACK;AACjD;AACA,YAAY,cAAc,EAAE,wDAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,8DAAuB;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,IAAI;AAC/B;AACA,KAAK;AACL,WAAW,gDAAmB,CAAC,2DAAO;AACtC;AACA,iEAAe,QAAQ,EAAC","sources":["webpack://Container_assets/./src/Bucket_assets/src/pages/showFile.jsx"],"sourcesContent":["import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Loading from \"../components/Loading\";\nimport { getReverseFileExtension } from \"./File\";\nfunction showFile(props) {\n    const { bucketActor } = useSelector((state) => state);\n    let key = props.match.params.filekey;\n    console.log(key);\n    const show = async () => {\n        let re = await bucketActor.getAssetExtkey(key);\n        console.log(\"RE\", re);\n        let chunks = Number(re.ok.need_query_times);\n        console.log(chunks);\n        let file = [];\n        for (let i = 0; i < chunks; i++) {\n            let reFile = await bucketActor.get({\n                file_key: key,\n                flag: i,\n            });\n            console.log(i);\n            console.log(reFile);\n            let tmp = reFile.ok[0];\n            for (let i = 1; i < reFile.ok.length; i++)\n                tmp = tmp.concat(reFile.ok[i]);\n            file = file.concat(tmp);\n        }\n        console.log(file);\n        let ff = new Uint8Array(file).buffer;\n        console.log(ff);\n        let file_type = getReverseFileExtension(re.ok.file_extension);\n        const blob = new Blob([ff], {\n            type: file_type,\n        });\n        console.log(blob);\n        return URL.createObjectURL(blob);\n    };\n    show().then((url) => {\n        console.log(\"ok\");\n        // window.location.assign(\"localhost:8080/\");\n        // window.history.back();\n        console.log(url);\n        if (url !== \"\")\n            window.open(`${url}`);\n        window.history.back();\n    });\n    return React.createElement(Loading, null);\n}\nexport default showFile;\n"],"names":[],"sourceRoot":""}