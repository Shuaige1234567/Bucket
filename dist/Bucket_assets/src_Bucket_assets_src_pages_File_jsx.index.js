"use strict";
(self["webpackChunkContainer_assets"] = self["webpackChunkContainer_assets"] || []).push([["src_Bucket_assets_src_pages_File_jsx"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/Bucket_assets/assets/File.css":
/*!*********************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/Bucket_assets/assets/File.css ***!
  \*********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/sourceMaps.js */ "./node_modules/css-loader/dist/runtime/sourceMaps.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, ".title .drop {\n  cursor: pointer;\n  width: 1000px;\n  border-radius: 2px;\n  border-color: #eeeeee;\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  margin: auto;\n}\n.title .uploadBac {\n  position: relative;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  background-color: #fafafc;\n}\n.title .uploadBac p {\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 0px !important;\n}\n\n.uploadBac .icon svg {\n  width: 35px;\n  height: 35px;\n}\n.fileTable .ant-table-tbody > tr > td {\n  max-width: 300px;\n}\n.showTable {\n  width: 100%;\n  position: relative;\n}\n.showTable .ant-spin-container {\n  transition: all 2s ease;\n}\n.action_bac {\n  width: 100%;\n  height: 32px;\n  bottom: 15px;\n  position: absolute;\n}\n.showTable .ant-pagination-prev,\n.showTable .ant-pagination-next,\n.showTable .ant-pagination-item {\n  z-index: 1;\n}\n.Action {\n  position: absolute;\n  right: 200px;\n}\n", "",{"version":3,"sources":["webpack://./src/Bucket_assets/assets/File.css"],"names":[],"mappings":"AAAA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB,qBAAqB;EACrB,oBAAoB;EACpB,cAAc;EACd,aAAa;EACb,YAAY;AACd;AACA;EACE,kBAAkB;EAClB,iBAAiB;EACjB,oBAAoB;EACpB,yBAAyB;AAC3B;AACA;EACE,kBAAkB;EAClB,eAAe;EACf,6BAA6B;AAC/B;;AAEA;EACE,WAAW;EACX,YAAY;AACd;AACA;EACE,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,kBAAkB;AACpB;AACA;EACE,uBAAuB;AACzB;AACA;EACE,WAAW;EACX,YAAY;EACZ,YAAY;EACZ,kBAAkB;AACpB;AACA;;;EAGE,UAAU;AACZ;AACA;EACE,kBAAkB;EAClB,YAAY;AACd","sourcesContent":[".title .drop {\n  cursor: pointer;\n  width: 1000px;\n  border-radius: 2px;\n  border-color: #eeeeee;\n  border-style: dashed;\n  color: #bdbdbd;\n  outline: none;\n  margin: auto;\n}\n.title .uploadBac {\n  position: relative;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  background-color: #fafafc;\n}\n.title .uploadBac p {\n  text-align: center;\n  font-size: 20px;\n  margin-bottom: 0px !important;\n}\n\n.uploadBac .icon svg {\n  width: 35px;\n  height: 35px;\n}\n.fileTable .ant-table-tbody > tr > td {\n  max-width: 300px;\n}\n.showTable {\n  width: 100%;\n  position: relative;\n}\n.showTable .ant-spin-container {\n  transition: all 2s ease;\n}\n.action_bac {\n  width: 100%;\n  height: 32px;\n  bottom: 15px;\n  position: absolute;\n}\n.showTable .ant-pagination-prev,\n.showTable .ant-pagination-next,\n.showTable .ant-pagination-item {\n  z-index: 1;\n}\n.Action {\n  position: absolute;\n  right: 200px;\n}\n"],"sourceRoot":""}]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }),

/***/ "./src/Bucket_assets/assets/File.css":
/*!*******************************************!*\
  !*** ./src/Bucket_assets/assets/File.css ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");
/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _node_modules_css_loader_dist_cjs_js_File_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../node_modules/css-loader/dist/cjs.js!./File.css */ "./node_modules/css-loader/dist/cjs.js!./src/Bucket_assets/assets/File.css");

      
      
      
      
      
      
      
      
      

var options = {};

options.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());
options.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());

      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");
    
options.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());
options.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());

var update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_File_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);




       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_File_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_File_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_File_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);


/***/ }),

/***/ "./src/Bucket_assets/src/pages/File.jsx":
/*!**********************************************!*\
  !*** ./src/Bucket_assets/src/pages/File.jsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getReverseFileExtension": () => (/* binding */ getReverseFileExtension),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react_dropzone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dropzone */ "./node_modules/react-dropzone/dist/es/index.js");
/* harmony import */ var js_sha256__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js-sha256 */ "./node_modules/js-sha256/src/sha256.js");
/* harmony import */ var js_sha256__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(js_sha256__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! nanoid */ "./node_modules/nanoid/index.dev.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/layout/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/message/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/tag/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/space/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/button/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/spin/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/table/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/popconfirm/index.js");
/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ant-design/icons */ "./node_modules/@ant-design/icons/es/icons/MedicineBoxTwoTone.js");
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-redux */ "./node_modules/react-redux/es/index.js");
/* harmony import */ var _assets_File_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../assets/File.css */ "./src/Bucket_assets/assets/File.css");








const { Content } = antd__WEBPACK_IMPORTED_MODULE_5__["default"];
const getReverseFileExtension = (type) => {
    switch (Object.keys(type)[0]) {
        case "jpeg":
            return "image/jpeg";
        case "gif":
            return "image/gif";
        case "jpg":
            return "image/jpg";
        case "png":
            return "image/png";
        case "svg":
            return "image/svg";
        case "avi":
            return "video/avi";
        case "mp4":
            return "video/mp4";
        case "aac":
            return "video/aac";
        case "wav":
            return "audio/wav";
        case "mp3":
            return "audio/mp3";
        case "wasm":
            return "application/wasm";
        default:
            return "";
    }
};
const getFileExtension = (type) => {
    switch (type) {
        case "image/jpeg":
            return { jpeg: null };
        case "image/gif":
            return { gif: null };
        case "image/jpg":
            return { jpg: null };
        case "image/png":
            return { png: null };
        case "image/svg":
            return { svg: null };
        case "video/avi":
            return { avi: null };
        case "video/aac":
            return { aac: null };
        case "video/mp4":
            return { mp4: null };
        case "audio/wav":
            return { wav: null };
        case "audio/mp3":
            return { mp3: null };
        case "audio/mpeg":
            return { mp3: null };
        case "application/wasm":
            return { wasm: null };
        default:
            return null;
    }
};
let newData = [];
let arrString = "";
let isUpload = false;
let uploadFileNumber = 0;
let flag = true;
let playupFlag = true;
let selectedRows = [];
const deletePromise = [];
function allFile() {
    const [key, setkey] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");
    const [isSpinning, setIsSpinning] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
    const { principal, assets, bucketActor } = (0,react_redux__WEBPACK_IMPORTED_MODULE_3__.useSelector)((state) => state);
    const storageKey = principal.value;
    let localStor = JSON.parse(localStorage.getItem(storageKey));
    const localBuffer = localStor === null ? [] : localStor;
    const assetExts = assets === null ? [] : assets.ok;
    if (localBuffer.length < assetExts.length && flag) {
        for (let i = 0; i < assetExts.length; i++) {
            localBuffer[i] = {
                filekey: assetExts[i].file_key,
                bucketId: assetExts[i].bucket_id.toString(),
                filename: assetExts[i].file_name,
                filetype: [Object.keys(assetExts[i].file_extension)[0]],
                id: (0,nanoid__WEBPACK_IMPORTED_MODULE_6__.nanoid)(),
            };
        }
    }
    const onDrop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((acceptedFiles) => {
        let allPromises = [];
        let allChunks = 0;
        uploadFileNumber = acceptedFiles.length;
        // Do something with the files
        console.log(acceptedFiles);
        let total_size = 0;
        for (let i = 0; i < acceptedFiles.length; i++) {
            const file = acceptedFiles[i];
            let fileKey = "";
            const digestTree = [];
            const dataArr = [];
            const tmpArr = [];
            let fileSize = file.size; // 文件大小
            total_size += fileSize;
            console.log("fileSize:", fileSize);
            let chunkSize = 1992295; // 切片的大小
            let chunks = Math.ceil(fileSize / chunkSize); // 获取切片的个数
            console.log("chunks:", chunks);
            let blobSlice = //
             File.prototype.slice ||
                File.prototype.mozSlice ||
                File.prototype.webkitSlice;
            let currentChunk = 0;
            const chunkPromises = [];
            const reader = new FileReader();
            let file_extension = getFileExtension(file.type);
            // fileType = Object.keys(file_extension)[0];
            reader.onload = function (e) {
                console.log("333");
                let result = e.target.result;
                let tData = new Uint8Array(result);
                let data = [];
                for (let i = 0; i < tData.length; i++) {
                    data.push(tData[i]);
                }
                let tmp = js_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256.digest(data);
                tmpArr.push(tmp);
                dataArr.push(data);
                digestTree.push(...tmp);
                currentChunk++;
                if (currentChunk < chunks) {
                    loadNext();
                }
                else {
                    // let root = sha256.digest(digestTree);
                    fileKey = (0,js_sha256__WEBPACK_IMPORTED_MODULE_2__.sha256)(digestTree);
                    // digestTree.splice(0, 0, ...root);
                    fileKey = fileKey.toUpperCase();
                    let isRepeat = localBuffer.find((item) => item.filekey === fileKey);
                    if (isRepeat) {
                        uploadFileNumber--;
                        antd__WEBPACK_IMPORTED_MODULE_7__["default"].error(`${fileKey} is Repeat`);
                    }
                    else {
                        isUpload = true;
                        // setkey({});
                        setIsSpinning(true);
                        console.log("ok");
                        for (let i = 0; i < dataArr.length; i++) {
                            console.log(fileKey);
                            chunkPromises.push(bucketActor.put({
                                file_key: fileKey,
                                file_name: file.name,
                                file_extension: file_extension,
                                chunk: { digest: tmpArr[i], data: dataArr[i] },
                                chunk_number: chunks,
                                order: i,
                            }));
                        }
                        allPromises.push(...chunkPromises);
                        if (allPromises.length === allChunks) {
                            Promise.all(allPromises).then();
                        }
                    }
                }
            };
            const loadNext = () => {
                console.log("222222");
                let start = currentChunk * chunkSize;
                let end = start + chunkSize > fileSize ? fileSize : start + chunkSize;
                reader.readAsArrayBuffer(blobSlice.call(file, start, end));
            };
            loadNext();
        }
    }, [localBuffer, bucketActor]);
    const turn = (preLength) => {
        return async () => {
            const arr = [];
            let local = JSON.parse(localStorage.getItem(storageKey));
            const localArr = local === null ? [] : local;
            let x = await bucketActor.getAssetExts();
            console.log(x.ok, localArr.length);
            if (x.ok.length > localArr.length) {
                for (let i = 0; i < x.ok.length; i++) {
                    arr.push({
                        id: (0,nanoid__WEBPACK_IMPORTED_MODULE_6__.nanoid)(),
                        filename: x.ok[i].file_name,
                        bucketId: x.ok[i].bucket_id.toString(),
                        filekey: x.ok[i].file_key,
                        filetype: [Object.keys(x.ok[i].file_extension)[0]],
                    });
                }
            }
            let kkk = JSON.stringify(arr);
            if (arr.length > 0 && storageKey !== "") {
                playupFlag = false;
                localStorage.setItem(storageKey, kkk);
                setkey({});
            }
            if (x.ok.length === preLength + uploadFileNumber) {
                console.log("上传完成");
                console.log(x.ok);
                location.reload();
                return 0;
            }
        };
    };
    if (isUpload && playupFlag) {
        console.log("!!!!");
        let local = JSON.parse(localStorage.getItem(storageKey));
        const localArr = local === null ? [] : local;
        setInterval(turn(localArr.length), 1000);
    }
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
        return () => {
            Promise.all(deletePromise).then(() => {
                console.log("deleted");
            });
        };
    });
    const loadImg = async (key) => {
        console.log(key);
        let re = await bucketActor.getAssetExtkey(key);
        console.log("RE", re);
        let chunks = Number(re.ok.need_query_times);
        console.log(chunks);
        let file = [];
        for (let i = 0; i < chunks; i++) {
            let reFile = await bucketActor.get({
                file_key: key,
                flag: i,
            });
            console.log(i);
            console.log(reFile);
            let tmp = reFile.ok[0];
            for (let i = 1; i < reFile.ok.length; i++)
                tmp = tmp.concat(reFile.ok[i]);
            file = file.concat(tmp);
        }
        console.log(file);
        let ff = new Uint8Array(file).buffer;
        console.log(ff);
        let file_type = getReverseFileExtension(re.ok.file_extension);
        const blob = new Blob([ff], {
            type: file_type,
        });
        console.log(blob);
        // console.log(sha256(blob).words);
        return URL.createObjectURL(blob);
    };
    const skip = (key) => {
        return async () => {
            setIsSpinning(true);
            loadImg(key).then((url) => {
                if (url) {
                    setIsSpinning(false);
                    window.open(`${url}`);
                }
            });
        };
    };
    const confirm = async () => {
        console.log(selectedRows);
        if (selectedRows.length > 0) {
            const newBuffer = JSON.parse(localStorage.getItem(storageKey));
            for (let i = 0; i < selectedRows.length; i++) {
                deletePromise.push(bucketActor.deletekey(selectedRows[i].filekey));
                let index = newBuffer.findIndex((item) => {
                    return selectedRows[i].filekey === item.filekey;
                });
                if (index !== -1) {
                    newBuffer.splice(index, 1);
                }
                else {
                    antd__WEBPACK_IMPORTED_MODULE_7__["default"].error("Please select the file to delete!");
                    return 0;
                }
            }
            console.log(newBuffer);
            const newStorage = JSON.stringify(newBuffer);
            if (storageKey !== "")
                localStorage.setItem(storageKey, newStorage);
            flag = false;
            selectedRows = [];
            setkey({});
            antd__WEBPACK_IMPORTED_MODULE_7__["default"].success("Deleted successded");
        }
        else {
            antd__WEBPACK_IMPORTED_MODULE_7__["default"].error("Please select the file to delete!");
        }
    };
    const cancel = () => {
        antd__WEBPACK_IMPORTED_MODULE_7__["default"].error("Cancel deletion");
    };
    const onSelectChange = (_, Rows) => {
        console.log(Rows);
        selectedRows = Rows;
    };
    const rowSelection = {
        onChange: onSelectChange,
    };
    const columns = [
        {
            title: "FileName",
            dataIndex: "filename",
        },
        {
            title: "BucketId",
            dataIndex: "bucketId",
        },
        {
            title: "FileKey",
            dataIndex: "filekey",
        },
        {
            title: "FileType",
            dataIndex: "filetype",
            render: (tags) => (react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, tags.map((tag) => {
                let color;
                switch (tag) {
                    case "mp3":
                    case "wav":
                        color = "volcano";
                        break;
                    case "acc":
                    case "mp4":
                    case "avi":
                        color = "geekblue";
                        break;
                    default:
                        color = "magenta";
                        break;
                }
                return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_8__["default"], { color: color, key: (0,nanoid__WEBPACK_IMPORTED_MODULE_6__.nanoid)() }, tag));
            }))),
        },
        {
            title: "Action",
            key: "action",
            render: (_, record) => (react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_9__["default"], { size: "middle" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_10__["default"], { type: "primary", onClick: skip(record.filekey) }, "Entry"))),
        },
    ];
    // localStorage.removeItem("ic-identity");
    // localStorage.removeItem("ic-delegation");
    // localStorage.removeItem(
    //   "eniwd-yttfc-vdnj4-4rx5q-6tnr5-g2hxx-2dfcx-6pbcc-xbrg2-oivre-4ae"
    // );
    newData = [...localBuffer];
    arrString = JSON.stringify(newData);
    if (newData.length > 0 && storageKey !== "")
        localStorage.setItem(storageKey, arrString);
    const { getRootProps, getInputProps } = (0,react_dropzone__WEBPACK_IMPORTED_MODULE_1__.useDropzone)({ onDrop });
    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_11__["default"], { spinning: isSpinning, size: "large" },
        react__WEBPACK_IMPORTED_MODULE_0__.createElement(Content, { style: { padding: "0 0", minHeight: 0 }, className: "main" },
            react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "showTable" },
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "title" },
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", null,
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "drop", ...getRootProps() },
                            react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", { ...getInputProps() }),
                            react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "uploadBac" },
                                react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null,
                                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_12__["default"], { className: "icon" })),
                                react__WEBPACK_IMPORTED_MODULE_0__.createElement("p", null, "Click one or drag many files to this area to upload"))))),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_13__["default"], { className: "fileTable", rowSelection: rowSelection, rowKey: (record) => record.id, columns: columns, pagination: { position: "bottomRight" }, dataSource: newData }),
                react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "action_bac" },
                    react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_9__["default"], { style: { display: newData.length > 0 ? "inline-flex" : "none" }, size: "middle", className: "Action" },
                        react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_14__["default"], { title: "Are you sure to delete these files?", onConfirm: confirm, onCancel: cancel, okText: "Yes", cancelText: "No" },
                            react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_10__["default"], { type: "primary" }, "Delete"))))))));
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (allFile);


/***/ })

}]);
//# sourceMappingURL=src_Bucket_assets_src_pages_File_jsx.index.js.map